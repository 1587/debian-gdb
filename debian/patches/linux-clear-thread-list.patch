Status: unsubmitted

This patch was for Debian bug #303736.  I now believe it's in the wrong
place; the generic mourn inferior should do this, perhaps.

---
 gdb/linux-thread-db.c |    3 +++
 1 file changed, 3 insertions(+)

Index: gdb-7.3.50~cvs20110627/gdb/linux-thread-db.c
===================================================================
--- gdb-7.3.50~cvs20110627.orig/gdb/linux-thread-db.c	2011-06-27 22:30:05.591103104 +0100
+++ gdb-7.3.50~cvs20110627/gdb/linux-thread-db.c	2011-06-28 00:16:09.383103846 +0100
@@ -1396,6 +1396,9 @@
      the inferior, so that we don't try to uninsert them.  */
   remove_thread_event_breakpoints ();
 
+  /* Destroy thread info; it's no longer valid.  */
+  init_thread_list ();
+
   /* Detach thread_db target ops.  */
   if (!thread_db_list)
     unpush_target (ops);
