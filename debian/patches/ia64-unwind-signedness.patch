2006-12-28  Daniel Jacobowitz  <dan@codesourcery.com>

        * ia64-tdep.c (get_kernel_table): Correct signedness in check
        for a negative return value.

---
 gdb/ia64-tdep.c |   11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

Index: gdb-6.6.dfsg/gdb/ia64-tdep.c
===================================================================
--- gdb-6.6.dfsg.orig/gdb/ia64-tdep.c	2007-08-24 13:31:08.000000000 -0600
+++ gdb-6.6.dfsg/gdb/ia64-tdep.c	2007-08-24 13:32:34.000000000 -0600
@@ -2486,13 +2486,14 @@ get_kernel_table (unw_word_t ip, unw_dyn
   if (!ktab) 
     {
       gdb_byte *ktab_buf;
-      size_t size;
+      LONGEST size;
 
-      ktab_size = getunwind_table (&ktab_buf);
-      if (ktab_size <= 0)
+      size = getunwind_table (&ktab_buf);
+      if (size <= 0)
 	return -UNW_ENOINFO;
-      else
-	ktab = (struct ia64_table_entry *) ktab_buf;
+
+      ktab = (struct ia64_table_entry *) ktab_buf;
+      ktab_size = size;
 
       for (etab = ktab; etab->start_offset; ++etab)
         etab->info_offset += KERNEL_START;
