---
 gdb/hppa-linux-nat.c     |    4 ++
 gdb/hppa-linux-offsets.h |   84 +++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 88 insertions(+)

Index: gdb-6.6.dfsg.90.20070912/gdb/hppa-linux-nat.c
===================================================================
--- gdb-6.6.dfsg.90.20070912.orig/gdb/hppa-linux-nat.c	2007-09-15 13:39:40.000000000 -0400
+++ gdb-6.6.dfsg.90.20070912/gdb/hppa-linux-nat.c	2007-09-15 13:39:57.000000000 -0400
@@ -29,11 +29,15 @@
 #include <sys/ptrace.h>
 #include <linux/version.h>
 
+#if 1
+#include "hppa-linux-offsets.h"
+#else
 #if LINUX_VERSION_CODE < KERNEL_VERSION(2,5,43)
 #include <asm/offset.h>
 #else
 #include <asm/offsets.h>
 #endif
+#endif
 
 #include "hppa-tdep.h"
 
Index: gdb-6.6.dfsg.90.20070912/gdb/hppa-linux-offsets.h
===================================================================
--- /dev/null	1970-01-01 00:00:00.000000000 +0000
+++ gdb-6.6.dfsg.90.20070912/gdb/hppa-linux-offsets.h	2007-09-15 13:39:33.000000000 -0400
@@ -0,0 +1,84 @@
+#define PT_PSW 0 /* offsetof(struct pt_regs, gr[ 0])	# */
+#define PT_GR1 4 /* offsetof(struct pt_regs, gr[ 1])	# */
+#define PT_GR2 8 /* offsetof(struct pt_regs, gr[ 2])	# */
+#define PT_GR3 12 /* offsetof(struct pt_regs, gr[ 3])	# */
+#define PT_GR4 16 /* offsetof(struct pt_regs, gr[ 4])	# */
+#define PT_GR5 20 /* offsetof(struct pt_regs, gr[ 5])	# */
+#define PT_GR6 24 /* offsetof(struct pt_regs, gr[ 6])	# */
+#define PT_GR7 28 /* offsetof(struct pt_regs, gr[ 7])	# */
+#define PT_GR8 32 /* offsetof(struct pt_regs, gr[ 8])	# */
+#define PT_GR9 36 /* offsetof(struct pt_regs, gr[ 9])	# */
+#define PT_GR10 40 /* offsetof(struct pt_regs, gr[10])	# */
+#define PT_GR11 44 /* offsetof(struct pt_regs, gr[11])	# */
+#define PT_GR12 48 /* offsetof(struct pt_regs, gr[12])	# */
+#define PT_GR13 52 /* offsetof(struct pt_regs, gr[13])	# */
+#define PT_GR14 56 /* offsetof(struct pt_regs, gr[14])	# */
+#define PT_GR15 60 /* offsetof(struct pt_regs, gr[15])	# */
+#define PT_GR16 64 /* offsetof(struct pt_regs, gr[16])	# */
+#define PT_GR17 68 /* offsetof(struct pt_regs, gr[17])	# */
+#define PT_GR18 72 /* offsetof(struct pt_regs, gr[18])	# */
+#define PT_GR19 76 /* offsetof(struct pt_regs, gr[19])	# */
+#define PT_GR20 80 /* offsetof(struct pt_regs, gr[20])	# */
+#define PT_GR21 84 /* offsetof(struct pt_regs, gr[21])	# */
+#define PT_GR22 88 /* offsetof(struct pt_regs, gr[22])	# */
+#define PT_GR23 92 /* offsetof(struct pt_regs, gr[23])	# */
+#define PT_GR24 96 /* offsetof(struct pt_regs, gr[24])	# */
+#define PT_GR25 100 /* offsetof(struct pt_regs, gr[25])	# */
+#define PT_GR26 104 /* offsetof(struct pt_regs, gr[26])	# */
+#define PT_GR27 108 /* offsetof(struct pt_regs, gr[27])	# */
+#define PT_GR28 112 /* offsetof(struct pt_regs, gr[28])	# */
+#define PT_GR29 116 /* offsetof(struct pt_regs, gr[29])	# */
+#define PT_GR30 120 /* offsetof(struct pt_regs, gr[30])	# */
+#define PT_GR31 124 /* offsetof(struct pt_regs, gr[31])	# */
+#define PT_FR0 128 /* offsetof(struct pt_regs, fr[ 0])	# */
+#define PT_FR1 136 /* offsetof(struct pt_regs, fr[ 1])	# */
+#define PT_FR2 144 /* offsetof(struct pt_regs, fr[ 2])	# */
+#define PT_FR3 152 /* offsetof(struct pt_regs, fr[ 3])	# */
+#define PT_FR4 160 /* offsetof(struct pt_regs, fr[ 4])	# */
+#define PT_FR5 168 /* offsetof(struct pt_regs, fr[ 5])	# */
+#define PT_FR6 176 /* offsetof(struct pt_regs, fr[ 6])	# */
+#define PT_FR7 184 /* offsetof(struct pt_regs, fr[ 7])	# */
+#define PT_FR8 192 /* offsetof(struct pt_regs, fr[ 8])	# */
+#define PT_FR9 200 /* offsetof(struct pt_regs, fr[ 9])	# */
+#define PT_FR10 208 /* offsetof(struct pt_regs, fr[10])	# */
+#define PT_FR11 216 /* offsetof(struct pt_regs, fr[11])	# */
+#define PT_FR12 224 /* offsetof(struct pt_regs, fr[12])	# */
+#define PT_FR13 232 /* offsetof(struct pt_regs, fr[13])	# */
+#define PT_FR14 240 /* offsetof(struct pt_regs, fr[14])	# */
+#define PT_FR15 248 /* offsetof(struct pt_regs, fr[15])	# */
+#define PT_FR16 256 /* offsetof(struct pt_regs, fr[16])	# */
+#define PT_FR17 264 /* offsetof(struct pt_regs, fr[17])	# */
+#define PT_FR18 272 /* offsetof(struct pt_regs, fr[18])	# */
+#define PT_FR19 280 /* offsetof(struct pt_regs, fr[19])	# */
+#define PT_FR20 288 /* offsetof(struct pt_regs, fr[20])	# */
+#define PT_FR21 296 /* offsetof(struct pt_regs, fr[21])	# */
+#define PT_FR22 304 /* offsetof(struct pt_regs, fr[22])	# */
+#define PT_FR23 312 /* offsetof(struct pt_regs, fr[23])	# */
+#define PT_FR24 320 /* offsetof(struct pt_regs, fr[24])	# */
+#define PT_FR25 328 /* offsetof(struct pt_regs, fr[25])	# */
+#define PT_FR26 336 /* offsetof(struct pt_regs, fr[26])	# */
+#define PT_FR27 344 /* offsetof(struct pt_regs, fr[27])	# */
+#define PT_FR28 352 /* offsetof(struct pt_regs, fr[28])	# */
+#define PT_FR29 360 /* offsetof(struct pt_regs, fr[29])	# */
+#define PT_FR30 368 /* offsetof(struct pt_regs, fr[30])	# */
+#define PT_FR31 376 /* offsetof(struct pt_regs, fr[31])	# */
+#define PT_SR0 384 /* offsetof(struct pt_regs, sr[ 0])	# */
+#define PT_SR1 388 /* offsetof(struct pt_regs, sr[ 1])	# */
+#define PT_SR2 392 /* offsetof(struct pt_regs, sr[ 2])	# */
+#define PT_SR3 396 /* offsetof(struct pt_regs, sr[ 3])	# */
+#define PT_SR4 400 /* offsetof(struct pt_regs, sr[ 4])	# */
+#define PT_SR5 404 /* offsetof(struct pt_regs, sr[ 5])	# */
+#define PT_SR6 408 /* offsetof(struct pt_regs, sr[ 6])	# */
+#define PT_SR7 412 /* offsetof(struct pt_regs, sr[ 7])	# */
+#define PT_IASQ0 416 /* offsetof(struct pt_regs, iasq[0])	# */
+#define PT_IASQ1 420 /* offsetof(struct pt_regs, iasq[1])	# */
+#define PT_IAOQ0 424 /* offsetof(struct pt_regs, iaoq[0])	# */
+#define PT_IAOQ1 428 /* offsetof(struct pt_regs, iaoq[1])	# */
+#define PT_CR27 432 /* offsetof(struct pt_regs, cr27)	# */
+#define PT_ORIG_R28 440 /* offsetof(struct pt_regs, orig_r28)	# */
+#define PT_KSP 444 /* offsetof(struct pt_regs, ksp)	# */
+#define PT_KPC 448 /* offsetof(struct pt_regs, kpc)	# */
+#define PT_SAR 452 /* offsetof(struct pt_regs, sar)	# */
+#define PT_IIR 456 /* offsetof(struct pt_regs, iir)	# */
+#define PT_ISR 460 /* offsetof(struct pt_regs, isr)	# */
+#define PT_IOR 464 /* offsetof(struct pt_regs, ior)	# */
